<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>FreeBSD | Carlos Gustavo Ruiz</title><meta name=keywords content="wiki,freebsd,shell"><meta name=description content="notes"><meta name=author content><link rel=canonical href=https://carlosgruiz.dev/wiki/freebsd/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://carlosgruiz.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://carlosgruiz.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://carlosgruiz.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://carlosgruiz.dev/apple-touch-icon.png><link rel=mask-icon href=https://carlosgruiz.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="FreeBSD"><meta property="og:description" content="notes"><meta property="og:type" content="article"><meta property="og:url" content="https://carlosgruiz.dev/wiki/freebsd/"><meta property="article:section" content="wiki"><meta name=twitter:card content="summary"><meta name=twitter:title content="FreeBSD"><meta name=twitter:description content="notes"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Wiki","item":"https://carlosgruiz.dev/wiki/"},{"@type":"ListItem","position":2,"name":"FreeBSD","item":"https://carlosgruiz.dev/wiki/freebsd/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"FreeBSD","name":"FreeBSD","description":"notes","keywords":["wiki","freebsd","shell"],"articleBody":"Add and Remove Users Create users using the adduser interactive utility: $ sudo adduser Username: john Full name: John Doe Uid (Leave empty for default): Login group [john]: Login group is sammy. Invite sammy into other groups? []: wheel Login class [default]: Shell (sh csh tcsh nologin) [sh]: Home directory [/home/john]: Home directory permissions (Leave empty for default): Use password-based authentication? [yes]: Use an empty password? (yes/no) [no]: Use a random password? (yes/no) [no]: Enter password: (add password) Enter password again: (add password) Lock out the account after creation? [no]: Remove user using the command rmuser. To lock a user account use: sudo pw lock username To unlock a user account use: sudo pw unlock username source\nChange keymap # bsdconfig look for option 7 Console \u003e Keymap.\nCheck Vulnerabilities source\n“FreeBSD maintains a vulnerability database that should be checked regularly to ensure that there are no vulnerabilities in the software you have installed on your system.\nWhile it is sometimes beneficial to update all of the software on your system, at the very least, any software with known vulnerabilities should be updated at the earliest possible time. To check for known vulnerabilities with any of the optional software you have installed on your system, type:\n# pkg audit -F This will download the latest vulnerability database from the FreeBSD servers and check it against the installed software on your system. If any vulnerabilities exist with your installed software, it will alert you.”\nCompilers When we get this error cc: error: no such file or directory: 'CXX=c++' it’s because the build routine can’t find a compiler. In order to fix this, if we want to use GCC type: $ CC=gcc and $ CXX=g++ or CXX=c++ in order to use Clang.\nsource\nError: Adding new user - pw: user ‘****’ disappeared during update Your databases are out of sync. Not sure how this happens but I get it from time to time too. Run /usr/sbin/pwd_mkdb -p /etc/master.passwd. Running vipw(8) and save-and-quit (without actually making any changes) also fixes it (easier to remember).\nsource\nError: What to do if pkg can’t find their .so files Updating FreeBSD from 11.2 to 12.1 pkg got broke, with a message complaining about a missing .so file.\nIn this case, we must type:\n# pkg-static install -f pkg Once we reinstall pkg, we can update and upgrade all packages.\nsource\nInstall Haskell Stack $ wget -qO- https://get.haskellstack.org/ | sh $ echo \"export PATH=\\\"\\$PATH:~/.local/bin\\\"\" \u003e\u003e ~/.profile $ source ~/.profile Install nvm $ sudo pkg install gcc7 gmake $ export CC=\"gcc7\" CXX=\"g++7\" CPP=\"cpp7\" CFLAGS=\"-std=c++11\" $ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash $ nvm install --lts=carbon $ echo \"nvm use --delete-prefix v8\" \u003e\u003e ~/.profile $ source ~/.profile Install Ports # portmaster group/port # portmaster --force-config Update and Upgrade the OS # freebsd-update fetch # freebsd-update install Update packages In order to update packages at freebsd, you need to run this command as root.\n# pkg upgrade ","wordCount":"486","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://carlosgruiz.dev/wiki/freebsd/"},"publisher":{"@type":"Organization","name":"Carlos Gustavo Ruiz","logo":{"@type":"ImageObject","url":"https://carlosgruiz.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://carlosgruiz.dev/ accesskey=h title="Carlos Gustavo Ruiz (Alt + H)">Carlos Gustavo Ruiz</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://carlosgruiz.dev/blog/ title=blog><span>blog</span></a></li><li><a href=https://carlosgruiz.dev/tags title=tags><span>tags</span></a></li><li><a href=https://carlosgruiz.dev/wiki/ title=wiki><span>wiki</span></a></li><li><a href=https://carlosgruiz.dev/talks/ title=talks><span>talks</span></a></li><li><a href=https://carlosgruiz.dev/bookmarks/ title=bookmarks><span>bookmarks</span></a></li><li><a href=https://carlosgruiz.dev/now/ title=now><span>now</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>FreeBSD</h1><div class=post-meta></div></header><div class=post-content><h2 id=add-and-remove-users>Add and Remove Users<a hidden class=anchor aria-hidden=true href=#add-and-remove-users>#</a></h2><ul><li>Create users using the <code>adduser</code> interactive utility:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo adduser
</span></span><span style=display:flex><span>Username: john
</span></span><span style=display:flex><span>Full name: John Doe
</span></span><span style=display:flex><span>Uid <span style=color:#f92672>(</span>Leave empty <span style=color:#66d9ef>for</span> default<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>Login group <span style=color:#f92672>[</span>john<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Login group is sammy. Invite sammy into other groups? <span style=color:#f92672>[]</span>: wheel
</span></span><span style=display:flex><span>Login class <span style=color:#f92672>[</span>default<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Shell <span style=color:#f92672>(</span>sh csh tcsh nologin<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>sh<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Home directory <span style=color:#f92672>[</span>/home/john<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Home directory permissions <span style=color:#f92672>(</span>Leave empty <span style=color:#66d9ef>for</span> default<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>Use password-based authentication? <span style=color:#f92672>[</span>yes<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Use an empty password? <span style=color:#f92672>(</span>yes/no<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>no<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Use a random password? <span style=color:#f92672>(</span>yes/no<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>no<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Enter password: <span style=color:#f92672>(</span>add password<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Enter password again: <span style=color:#f92672>(</span>add password<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Lock out the account after creation? <span style=color:#f92672>[</span>no<span style=color:#f92672>]</span>:
</span></span></code></pre></div><ul><li>Remove user using the command <code>rmuser</code>.</li><li>To lock a user account use: <code>sudo pw lock username</code></li><li>To unlock a user account use: <code>sudo pw unlock username</code></li></ul><p><a href=https://www.digitalocean.com/community/tutorials/how-to-add-and-remove-users-on-freebsd>source</a></p><h2 id=change-keymap>Change keymap<a hidden class=anchor aria-hidden=true href=#change-keymap>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># bsdconfig</span>
</span></span></code></pre></div><p>look for option <em>7 Console</em> > <em>Keymap</em>.</p><h2 id=check-vulnerabilities>Check Vulnerabilities<a hidden class=anchor aria-hidden=true href=#check-vulnerabilities>#</a></h2><p><a href=https://www.digitalocean.com/community/tutorials/an-introduction-to-basic-freebsd-maintenance#checking-for-software-vulnerabilities>source</a></p><p>&ldquo;FreeBSD maintains a vulnerability database that should be checked regularly to ensure that there are no vulnerabilities in the software you have installed on your system.</p><p>While it is sometimes beneficial to update all of the software on your system, at the very least, any software with known vulnerabilities should be updated at the earliest possible time. To check for known vulnerabilities with any of the optional software you have installed on your system, type:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># pkg audit -F</span>
</span></span></code></pre></div><p>This will download the latest vulnerability database from the FreeBSD servers and check it against the installed software on your system. If any vulnerabilities exist with your installed software, it will alert you.&rdquo;</p><h2 id=compilers>Compilers<a hidden class=anchor aria-hidden=true href=#compilers>#</a></h2><p>When we get this error <code>cc: error: no such file or directory: 'CXX=c++'</code> it&rsquo;s
because the build routine can&rsquo;t find a compiler. In order to fix this, if we
want to use GCC type: <code>$ CC=gcc</code> and <code>$ CXX=g++</code> or <code>CXX=c++</code> in order to use
Clang.</p><p><a href=https://github.com/phpv8/v8js/issues/288#issuecomment-285907026>source</a></p><h2 id=error-adding-new-user---pw-user--disappeared-during-update>Error: Adding new user - pw: user &lsquo;****&rsquo; disappeared during update<a hidden class=anchor aria-hidden=true href=#error-adding-new-user---pw-user--disappeared-during-update>#</a></h2><p>Your databases are out of sync. Not sure how this happens but I get it from time
to time too. Run <code>/usr/sbin/pwd_mkdb -p /etc/master.passwd</code>. Running
<a href="https://www.freebsd.org/cgi/man.cgi?query=vipw&amp;sektion=8&amp;manpath=freebsd-release-port">vipw(8)</a>
and save-and-quit (without actually making any changes) also fixes it (easier to
remember).</p><p><a href=https://forums.freebsd.org/threads/error-adding-new-user-pw-user-anne-disappeared-during-update.59525/>source</a></p><h2 id=error-what-to-do-if-pkg-cant-find-their-so-files>Error: What to do if <code>pkg</code> can&rsquo;t find their <code>.so</code> files<a hidden class=anchor aria-hidden=true href=#error-what-to-do-if-pkg-cant-find-their-so-files>#</a></h2><p>Updating FreeBSD from 11.2 to 12.1 <code>pkg</code> got broke, with a message complaining
about a missing <code>.so</code> file.</p><p>In this case, we must type:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># pkg-static install -f pkg</span>
</span></span></code></pre></div><p>Once we reinstall <code>pkg</code>, we can update and upgrade all packages.</p><p><a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=239498">source</a></p><h2 id=install-haskell-stack>Install Haskell Stack<a hidden class=anchor aria-hidden=true href=#install-haskell-stack>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ wget -qO- https://get.haskellstack.org/ | sh
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;export PATH=\&#34;\$PATH:~/.local/bin\&#34;&#34;</span> &gt;&gt; ~/.profile
</span></span><span style=display:flex><span>$ source ~/.profile
</span></span></code></pre></div><h2 id=install-nvm>Install nvm<a hidden class=anchor aria-hidden=true href=#install-nvm>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo pkg install gcc7 gmake
</span></span><span style=display:flex><span>$ export CC<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gcc7&#34;</span> CXX<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;g++7&#34;</span> CPP<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cpp7&#34;</span> CFLAGS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;-std=c++11&#34;</span>
</span></span><span style=display:flex><span>$ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash
</span></span><span style=display:flex><span>$ nvm install --lts<span style=color:#f92672>=</span>carbon
</span></span><span style=display:flex><span>$ echo <span style=color:#e6db74>&#34;nvm use --delete-prefix v8&#34;</span> &gt;&gt; ~/.profile
</span></span><span style=display:flex><span>$ source ~/.profile
</span></span></code></pre></div><h2 id=install-ports>Install Ports<a hidden class=anchor aria-hidden=true href=#install-ports>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># portmaster group/port</span>
</span></span><span style=display:flex><span><span style=color:#75715e># portmaster --force-config</span>
</span></span></code></pre></div><h2 id=update-and-upgrade-the-os>Update and Upgrade the OS<a hidden class=anchor aria-hidden=true href=#update-and-upgrade-the-os>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># freebsd-update fetch</span>
</span></span><span style=display:flex><span><span style=color:#75715e># freebsd-update install</span>
</span></span></code></pre></div><h2 id=update-packages>Update packages<a hidden class=anchor aria-hidden=true href=#update-packages>#</a></h2><p>In order to update packages at freebsd, you need to run this command as root.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># pkg upgrade</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://carlosgruiz.dev/tags/wiki/>wiki</a></li><li><a href=https://carlosgruiz.dev/tags/freebsd/>freebsd</a></li><li><a href=https://carlosgruiz.dev/tags/shell/>shell</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://carlosgruiz.dev/>Carlos Gustavo Ruiz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>